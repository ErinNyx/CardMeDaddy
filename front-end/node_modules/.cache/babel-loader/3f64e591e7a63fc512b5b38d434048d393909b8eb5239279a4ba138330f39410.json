{"ast":null,"code":"import _regeneratorRuntime from\"/home/erin/WebstormProjects/CardMe/front-end/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/erin/WebstormProjects/CardMe/front-end/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/erin/WebstormProjects/CardMe/front-end/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import'./index.scss';import Navbar from'../Navbar';import{io}from'socket.io-client';import{useState,useEffect}from\"react\";import{NavLink}from\"react-router-dom\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var socket=io();socket.on('alert',function(msg){alert(msg);});socket.on('redirect',function(link){window.location.href=link;});socket.on('add-player',function(){});socket.on('store',function(data){return localStorage.setItem(data.key,data.token);});var Game=function Game(){var init=/*#__PURE__*/_jsx(_Fragment,{children:\"Loading . . .\"});var _useState=useState(init),_useState2=_slicedToArray(_useState,2),game=_useState2[0],setGame=_useState2[1];useEffect(function(){_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var gameID,game,host,page;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:gameID=window.location.href.split('/');socket.emit('game-connection',{game:gameID[gameID.length-1]});_context.next=4;return fetch('/api/game-info',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({game:gameID[gameID.length-1],player:localStorage.getItem('id')})}).then(function(res){return res.json();});case 4:game=_context.sent;if(!game.status){_context.next=7;break;}return _context.abrupt(\"return\",alert(game.msg));case 7:host=game.host==localStorage.getItem('id')?/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return socket.emit('launch-game',{code:game.code,user:localStorage.getItem('id')});},children:\"Start!\"}):/*#__PURE__*/_jsx(_Fragment,{});page=game.started?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:'wrapper-top',children:[/*#__PURE__*/_jsx(\"div\",{className:'xar',children:game.czar}),/*#__PURE__*/_jsx(\"div\",{className:'call',children:game.cards.calls[0]}),/*#__PURE__*/_jsx(\"div\",{className:'responses',children:game.players.map(function(p){p.id===localStorage.getItem('id')?p.hand.map(function(r){return/*#__PURE__*/_jsxs(_Fragment,{children:[\" \",r.text,\" \"]});}):/*#__PURE__*/_jsx(_Fragment,{children:\" (reload) \"});})})]}),/*#__PURE__*/_jsxs(\"div\",{className:'wrapper-bottom',children:[/*#__PURE__*/_jsx(\"div\",{className:'chat'}),/*#__PURE__*/_jsx(\"div\",{className:'players'}),/*#__PURE__*/_jsx(\"div\",{className:'hand'})]})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:'row-wrapper',id:'pregame-screen',children:[\"Join Game Code: \",game.code,/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),\"Waiting on players . . . \",/*#__PURE__*/_jsx(\"br\",{}),game.players.map(function(p){return/*#__PURE__*/_jsxs(_Fragment,{children:[\" \",p.username,\" \"]});}).reduce(function(prev,curr){return[prev,', ',curr];})]}),host]});setGame(page);case 10:case\"end\":return _context.stop();}},_callee);}))();});return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navbar,{}),game]});};export default Game;","map":{"version":3,"names":["Navbar","io","useState","useEffect","NavLink","Fragment","_Fragment","jsx","_jsx","jsxs","_jsxs","socket","on","msg","alert","link","window","location","href","data","localStorage","setItem","key","token","Game","init","children","_useState","_useState2","_slicedToArray","game","setGame","_asyncToGenerator","_regeneratorRuntime","mark","_callee","gameID","host","page","wrap","_callee$","_context","prev","next","split","emit","length","fetch","method","headers","body","JSON","stringify","player","getItem","then","res","json","sent","status","abrupt","onClick","code","user","started","className","czar","cards","calls","players","map","p","id","hand","r","text","username","reduce","curr","stop"],"sources":["/home/erin/WebstormProjects/CardMe/front-end/src/components/Game/index.js"],"sourcesContent":["import './index.scss';\nimport Navbar from '../Navbar';\nimport { io } from 'socket.io-client';\nimport { useState, useEffect } from \"react\";\nimport {NavLink} from \"react-router-dom\";\n\nconst socket = io();\nsocket.on('alert', (msg) => {\n    alert(msg);\n});\n\nsocket.on('redirect', (link) => {\n    window.location.href = link;\n});\n\nsocket.on('add-player', () => {});\nsocket.on('store', (data) => localStorage.setItem(data.key, data.token));\n\nconst Game = () => {\n    const init = (\n        <>\n            Loading . . .\n        </>\n    );\n\n    const [game, setGame] = useState(init);\n\n    useEffect(() => {\n        (async () => {\n            const gameID = window.location.href.split('/');\n            socket.emit('game-connection', ({ game: gameID[gameID.length - 1] }));\n\n            const game = await fetch('/api/game-info', {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify({\n                    game: gameID[gameID.length - 1],\n                    player: localStorage.getItem('id')\n                })\n            }).then((res) => res.json());\n\n            if(game.status) return alert(game.msg);\n\n            const host = game.host == localStorage.getItem('id') ? <button onClick={() => socket.emit('launch-game', {\n                    code: game.code,\n                    user: localStorage.getItem('id')\n                })\n            }>Start!</button> :\n                <></>;\n\n            const page = game.started ? (\n                <>\n                    <div className={'wrapper-top'}>\n                        <div className={ 'xar' }>{ game.czar }</div>\n                        <div className={ 'call' }>{ game.cards.calls[0] }</div>\n                        <div className={ 'responses' }>{\n                            game.players.map((p) => {\n                            p.id === localStorage.getItem('id') ?\n                                p.hand.map((r) => (<> { r.text } </>)) :\n                                (<> (reload) </>)\n                            })\n                        }</div>\n                    </div>\n                    <div className={'wrapper-bottom'}>\n                        <div className={ 'chat' }>\n\n                        </div>\n                        <div className={ 'players' }>\n\n                        </div>\n                        <div className={ 'hand' }>\n\n                        </div>\n                    </div>\n                </>\n            ) : (\n                <>\n                    <div className={ 'row-wrapper' } id={ 'pregame-screen' }>\n                        Join Game Code: { game.code }<br /><br />\n                        Waiting on players . . . <br />\n                        {\n                            game.players\n                                .map((p) => (<> { p.username } </>))\n                                .reduce((prev, curr) => [prev, ', ', curr])\n                        }\n                    </div>\n                    { host }\n                </>\n            );\n\n            setGame(page);\n        })();\n    })\n\n    return (\n        <>\n            <Navbar />\n\n            { game }\n        </>\n    );\n}\n\nexport default Game;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}