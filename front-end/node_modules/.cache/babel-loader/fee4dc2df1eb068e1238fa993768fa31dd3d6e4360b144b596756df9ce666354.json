{"ast":null,"code":"import _regeneratorRuntime from\"/home/erin/WebstormProjects/CardMe/front-end/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/erin/WebstormProjects/CardMe/front-end/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/erin/WebstormProjects/CardMe/front-end/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import Navbar from\"../Navbar\";import{io}from'socket.io-client';import{useEffect,useState}from\"react\";import'./index.scss';import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var socket=io();socket.on('alert',function(msg){alert(msg);});socket.on('redirect',function(link){window.location.href=link;});var Join=function Join(){var init=/*#__PURE__*/_jsx(_Fragment,{});var _useState=useState(init),_useState2=_slicedToArray(_useState,2),pub=_useState2[0],setPublic=_useState2[1];useEffect(function(){_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var games,pubGames;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return fetch('/api/get-games',{method:'POST'}).then(function(res){return res.json();});case 2:games=_context.sent;pubGames=/*#__PURE__*/_jsxs(_Fragment,{children:[\" \",games.gameList.map(function(g,i){return/*#__PURE__*/_jsxs(\"div\",{className:'public-game',onClick:function onClick(){socket.emit('join-game',{code:g.code,id:localStorage.getItem('id')});},children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Host: \",games.hosts[i].username,\" \"]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Players: \",g.players.length,\" \"]})]});}),\" \"]});setPublic(pubGames);case 5:case\"end\":return _context.stop();}},_callee);}))();});return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsxs(\"div\",{className:'game-options',children:[/*#__PURE__*/_jsxs(\"form\",{id:'join-form',onSubmit:function onSubmit(e){e.preventDefault();socket.emit('join-game',{code:document.getElementById('join-code').value,id:localStorage.getItem('id'),password:document.getElementById('join-password').value});},children:[/*#__PURE__*/_jsx(\"input\",{type:'text',placeholder:'Game Code',id:'join-code'}),/*#__PURE__*/_jsx(\"input\",{type:'text',placeholder:'Game Password',id:'join-password'}),/*#__PURE__*/_jsx(\"input\",{type:'submit',value:'Join'})]}),/*#__PURE__*/_jsx(\"span\",{className:'public-title',children:\"Join Public\"}),/*#__PURE__*/_jsx(\"div\",{className:'public-options',children:pub})]})]});};export default Join;","map":{"version":3,"names":["Navbar","io","useEffect","useState","Fragment","_Fragment","jsx","_jsx","jsxs","_jsxs","socket","on","msg","alert","link","window","location","href","Join","init","_useState","_useState2","_slicedToArray","pub","setPublic","_asyncToGenerator","_regeneratorRuntime","mark","_callee","games","pubGames","wrap","_callee$","_context","prev","next","fetch","method","then","res","json","sent","children","gameList","map","g","i","className","onClick","emit","code","id","localStorage","getItem","hosts","username","players","length","stop","onSubmit","e","preventDefault","document","getElementById","value","password","type","placeholder"],"sources":["/home/erin/WebstormProjects/CardMe/front-end/src/components/Join Game/index.js"],"sourcesContent":["import Navbar from \"../Navbar\";\nimport { io } from 'socket.io-client';\nimport {useEffect, useState} from \"react\";\n\nimport './index.scss';\n\nconst socket = io();\nsocket.on('alert', (msg) => {\n    alert(msg);\n});\n\nsocket.on('redirect', (link) => {\n    window.location.href = link;\n});\n\nconst Join = () => {\n\n    const init = (<></>);\n\n    const [pub, setPublic] = useState(init);\n\n    useEffect( () => {\n\n        (async () => {\n            const games = await fetch('/api/get-games', { method: 'POST' }).then((res) => res.json());\n\n            let pubGames = (<> { games.gameList.map((g, i) =>\n                (\n                    <div className={'public-game'} onClick={() => {\n                        socket.emit('join-game', {\n                            code: g.code,\n                            id: localStorage.getItem('id')\n                        });\n                    }\n                    }>\n                        <p>Host: { games.hosts[i].username } </p>\n                        <p>Players: { g.players.length } </p>\n                    </div>\n                )\n            ) } </>)\n\n            setPublic(pubGames);\n        })();\n    })\n\n    return (\n        <>\n            <Navbar />\n            <div className={ 'game-options' }>\n                <form id={ 'join-form' } onSubmit={ (e) => {\n                    e.preventDefault();\n                    socket.emit('join-game', {\n                        code: document.getElementById('join-code').value,\n                        id: localStorage.getItem('id'),\n                        password: document.getElementById('join-password').value\n                    });\n                }}>\n                    <input type={ 'text' } placeholder={ 'Game Code' } id={ 'join-code' } />\n                    <input type={ 'text' } placeholder={ 'Game Password' } id={ 'join-password' } />\n                    <input type={ 'submit' } value={ 'Join' } />\n                </form>\n\n                <span className={'public-title'}>Join Public</span>\n\n                <div className={'public-options'}>\n                    { pub }\n                </div>\n            </div>\n        </>\n    );\n}\n\nexport default Join;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}